{% extends 'admin/base.html.twig' %}

{% block title %}Dashboard
{% endblock %}

{% block body %}
	<div>
		<h1 class="page-title font-bold">Dashboard</h1>
		<div class="flex flex-column md:flex-row content-between justify-between">
			<div>
				<p class="mt-4 mb-2 font-bold">New customers</p>
				<canvas id="customers" style="max-height: 200px;"></canvas>
			</div>
			<div>
				<p class="mt-4 mb-2 font-bold">New reservations</p>
				<canvas id="reservations" style="max-height: 200px;"></canvas>
			</div>
			<div></b>
		</div>
	{% endblock %}
	{% block javascripts %}
		{{ parent() }}
		<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
		<script>
			document.addEventListener("DOMContentLoaded", function () {
const generateChart = (chart, chartLabels, chartData) => {
new Chart(chart, {
type: 'bar',
responsive: true,
data: {
labels: chartLabels,
datasets: [
{
data: Object.values(chartData),
backgroundColor: [
'rgba(255, 99, 132, 0.2)',
'rgba(54, 162, 235, 0.2)',
'rgba(255, 206, 86, 0.2)',
'rgba(75, 192, 192, 0.2)',
'rgba(153, 102, 255, 0.2)',
'rgba(255, 159, 64, 0.2)'
],
borderColor: [
'rgba(255, 99, 132, 1)',
'rgba(54, 162, 235, 1)',
'rgba(255, 206, 86, 1)',
'rgba(75, 192, 192, 1)',
'rgba(153, 102, 255, 1)',
'rgba(255, 159, 64, 1)'
],
borderWidth: 1
}
]
},
options: {
plugins: {
legend: {
display: false
}
},
scales: {
y: {
beginAtZero: true
}
},
maintainAspectRatio: false
}
});
}

const customersChart = document.getElementById('customers');
const reservationsChart = document.getElementById('reservations');
const customersMonthlyLabels = JSON.parse('{{ customersMonthlyData | keys | json_encode | raw }}');
const customersMonthlyData = JSON.parse('{{ customersMonthlyData | json_encode | raw }}');

const reservationsMonthlyLabels = JSON.parse('{{ reservationsMonthlyData | keys | json_encode | raw }}');
const reservationsMonthlyData = JSON.parse('{{ reservationsMonthlyData | json_encode | raw }}');
console.log(reservationsMonthlyData);
generateChart(customersChart, customersMonthlyLabels, customersMonthlyData);
generateChart(reservationsChart, reservationsMonthlyLabels, reservationsMonthlyData);
});
		</script>
	{% endblock %}
